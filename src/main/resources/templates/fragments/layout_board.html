<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="all(main_title, links, script, content)">
    <head th:replace="fragments/head :: base_header(${main_title}, ${links})"></head>
    <body class="hold-transition skin-blue sidebar-mini fixed">
        <!-- Wrapper -->
        <div class="wrapper">
            <div th:replace="fragments/header :: header"></div>
            <div th:replace="fragments/main_sidebar :: main-sidebar"></div>
            <!-- Content Wrapper. Contains page content -->
            <th:block th:replace="${content}" />
            <!-- /.content-wrapper -->
            <div th:replace="fragments/board_footer :: footer"></div>
            <div th:replace="fragments/content_sidebar :: content-sidebar"></div>
        </div>
        <!-- ./wrapper -->
        <th:block th:replace="fragments/script :: base_script(${script})"></th:block>
        <script>
        var width = $(window).width();
        var height = $(window).height();
        var windowSizeChanged = false;
        $(window).on('resize', function(){
            if($(this).width() != width || $(this).height() != height){
                width = $(this).width();
                height = $(this).height();
                windowSizeChanged = true;
                toggleFixed(windowSizeChanged);  
            }
        });
        $(document).ready(function(){
            windowSizeChanged = false;
            toggleFixed(windowSizeChanged);  
        })
        function toggleFixed (windowSizeChanged) {
            var parentwidth = $(".direct-chat-messages").width();      
            $(".board-footer").toggleClass("board-width").width(parentwidth);   
            var parentHeight = $(".board-content-wrapper").outerHeight() - $(".navbar").outerHeight() - $(".box-header").outerHeight();   
            var textBox = $(".board-footer").outerHeight();
            if(checkBrowser() === "Chrome" ){
                if(windowSizeChanged == false){
                    parentHeight = parentHeight - textBox;
                }
            }
            if(windowSizeChanged == false){
                $(".direct-chat-messages").toggleClass("board-height").css({"min-height":parentHeight});
                var textBoxHeight = $(".board-footer").height();
                $(".direct-chat-messages").toggleClass("board-margin").css({"margin-bottom":textBoxHeight});
            }
        }
        </script>
    </body>
</html>
